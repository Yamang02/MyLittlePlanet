<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phaser 테스트</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #000;
            color: white;
            font-family: Arial, sans-serif;
        }
        #game-container {
            border: 2px solid #333;
            border-radius: 8px;
            margin: 20px 0;
        }
        #status {
            margin: 10px 0;
            padding: 10px;
            background: #333;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>Phaser 테스트</h1>
    <div id="status">상태: 로딩 중...</div>
    <div id="game-container"></div>
    
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.70.0/dist/phaser.min.js"></script>
    <script>
        const status = document.getElementById('status');
        
        // Phaser 로딩 확인
        if (typeof Phaser === 'undefined') {
            status.innerHTML = '❌ Phaser 로딩 실패';
            status.style.color = 'red';
        } else {
            status.innerHTML = '✅ Phaser 로딩 성공';
            status.style.color = 'green';
            
            // 간단한 테스트 씬
            class TestScene extends Phaser.Scene {
                constructor() {
                    super({ key: 'TestScene' });
                }
                
                create() {
                    this.add.text(400, 300, 'Phaser 작동 중!', {
                        fontSize: '32px',
                        fill: '#fff'
                    }).setOrigin(0.5);
                    
                    this.add.text(400, 350, '게임 파일들을 로드해보겠습니다...', {
                        fontSize: '16px',
                        fill: '#ccc'
                    }).setOrigin(0.5);
                    
                    // 게임 파일들 로드 시도
                    this.loadGameFiles();
                }
                
                loadGameFiles() {
                    const files = [
                        'js/scenes/BootScene.js',
                        'js/scenes/PreloadScene.js',
                        'js/scenes/MainMenuScene.js',
                        'js/scenes/GameScene.js',
                        'js/scenes/VictoryScene.js',
                        'js/scenes/GameOverScene.js',
                        'js/scenes/KingEventCutscene.js',
                        'js/game.js'
                    ];
                    
                    let loadedCount = 0;
                    let errorCount = 0;
                    
                    files.forEach((file, index) => {
                        const script = document.createElement('script');
                        script.src = file;
                        script.onload = () => {
                            loadedCount++;
                            this.updateStatus(`로드됨: ${file}`);
                            if (loadedCount + errorCount === files.length) {
                                this.showFinalStatus(loadedCount, errorCount);
                            }
                        };
                        script.onerror = () => {
                            errorCount++;
                            this.updateStatus(`❌ 로드 실패: ${file}`, 'red');
                            if (loadedCount + errorCount === files.length) {
                                this.showFinalStatus(loadedCount, errorCount);
                            }
                        };
                        document.head.appendChild(script);
                    });
                }
                
                updateStatus(message, color = 'green') {
                    const statusDiv = document.createElement('div');
                    statusDiv.innerHTML = message;
                    statusDiv.style.color = color;
                    statusDiv.style.fontSize = '12px';
                    statusDiv.style.margin = '2px 0';
                    document.body.appendChild(statusDiv);
                }
                
                showFinalStatus(loaded, errors) {
                    const finalStatus = document.createElement('div');
                    finalStatus.style.marginTop = '20px';
                    finalStatus.style.padding = '10px';
                    finalStatus.style.background = errors > 0 ? '#442222' : '#224422';
                    finalStatus.style.borderRadius = '5px';
                    
                    if (errors === 0) {
                        finalStatus.innerHTML = `✅ 모든 파일 로드 성공! (${loaded}/${loaded})`;
                        finalStatus.style.color = 'green';
                    } else {
                        finalStatus.innerHTML = `⚠️ 일부 파일 로드 실패 (${loaded}/${loaded + errors})`;
                        finalStatus.style.color = 'orange';
                    }
                    
                    document.body.appendChild(finalStatus);
                }
            }
            
            // 테스트 게임 설정
            const config = {
                type: Phaser.AUTO,
                width: 800,
                height: 600,
                parent: 'game-container',
                backgroundColor: '#2c3e50',
                scene: TestScene
            };
            
            new Phaser.Game(config);
        }
    </script>
</body>
</html> 